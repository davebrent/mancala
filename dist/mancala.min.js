(function(){"use strict";function n(e,t,n){this.player=e,this.cup=t||null,this.seeds=n||0}function r(e){this.pit=0,this.cups=[4,4,4,4,4,4],this.move=e}function i(e,t){var n=t.cups.map(function(e,t){return e!==0?t+1:undefined}).filter(Number);setTimeout(function(){e(n[Math.floor(Math.random()*n.length)]-1)},500)}function s(e,t,n){return this.options=n,this.players=[new r(e),new r(t)],this}function o(e,t,n){var r=this,i;i=["start","finish","capture","extra","picked","pit","move"],i.forEach(function(e){n["on"+e]=n[e]||function(){}}),n.speed=n.speed||500,this.start=this.restart=function(){return r.board=(new s(e,t,n)).start(),r}}var e=this,t={};t.capture=function(e,t,n){var r,i;return e.player!==t.player?!1:(r=n[(e.player+1)%n.length].cups[t.cup],i=n[t.player].cups[t.cup],r>0&&i===1?!0:!1)},t.extra=function(e,t){var n,r;return e.player!==t.player?!1:(n=e.player===0&&t.cup<0,r=t.player===1&&t.cup===6,n||r?!0:!1)},t.end=function(e,t,n){return n.map(function(e){return e.finished()}).reduce(function(e,t){return!e&&t?t:e})},n.prototype.clone=function(){return new n(this.player,this.cup)},n.prototype.next=function(){return new n((this.player+1)%2,null)},r.prototype.finished=function(){return this.cups.reduce(function(e,t){return e+t})===0},s.prototype.start=function(){return this.options.onstart(this.players),this.next(new n(0,null)),this},s.prototype.next=function(e){var t=this;this.players[e.player].move(function(n){e.cup=n,t.move(e)},this.players)},s.prototype._get_seeds=function(e){return this.players[e.player].cups[e.cup]},s.prototype.move=function(e){function i(e,n){r.seeds===0?clearTimeout(n):(r.seeds-=1,t.options.onmove(r,t.players),clearTimeout(n),e())}var t=this,n,r;return r=e.clone(),r.seeds=this._get_seeds(r),function s(){n=setTimeout(function(){i(s,n)},t.options.speed)}(),this},e.mancala={rules:t,Turn:n,Board:s,Player:r,computer:i,Mancala:o}}).call(this),function(){"use strict";function t(){}var e=this;e.game=t}.call(this);